{"version":3,"sources":["app/pages/book/index.coffee","app/pages/login/index.coffee","app/pages/note/index.coffee","app/pages/todo/index.coffee","app/share/box.coffee","app/share/frame/index.coffee","app/share/frame/nav.coffee","app/share/index.coffee","app/share/quite/hash.coffee","app/share/quite/index.coffee","app/share/quite/piece/constants.coffee","app/share/quite/piece/index.coffee","app/share/quite/quite.coffee","app/share/quite/router.coffee","app/share/quite/under/common.coffee","app/share/quite/under/constants.coffee","app/share/quite/under/index.coffee","app/share/quite/under/test/common.coffee","app/share/quite/under/test/test.coffee","app/share/quite/widget/index.coffee","app/share/under.coffee","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5DA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9BA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxJA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9YA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3EA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5HA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtGA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxFA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7aA;AAAA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"public/js/app.js","sourcesContent":["var Page,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nPage = (function(superClass) {\n  extend(Page, superClass);\n\n  function Page() {\n    return Page.__super__.constructor.apply(this, arguments);\n  }\n\n  Page.prototype.build = function() {\n    return P.div().C(\"booked ok still?\");\n  };\n\n  return Page;\n\n})(Widget);\n\nmodule.exports = new Page();\n","var Login,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nwindow.json = JSON;\n\nrequire('share/quite');\n\nrequire('share/box');\n\nrequire('share/under');\n\nLogin = (function(superClass) {\n  extend(Login, superClass);\n\n  function Login() {\n    this.build = bind(this.build, this);\n    return Login.__super__.constructor.apply(this, arguments);\n  }\n\n  Login.prototype.build = function() {\n    return P.div('form-box').C(P.div('header').C('Sign In'), P.div().C(P.form().method('post').C(P.div('body bg-gray').C(P.div('form-group').C(this.username = P.inputBox('form-control').name('username').placeholder('User ID')), P.div('form-group').C(this.password = P.input('form-control').type('password').name('password').placeholder('password')).onkeyup((function(_this) {\n      return function(e) {\n        if (e.which === 13) {\n          return _this.submit.click();\n        }\n      };\n    })(this)))), this.submit = P.button('btn bg-olive btn-block').type('submit').C('Sign me in').onclick((function(_this) {\n      return function() {\n        var password, username;\n        username = _this.username.value();\n        password = _this.password.value();\n        return _.login(username, password, function(err, out) {\n          var origin;\n          origin = window.location.href.split(\"?path=\")[1];\n          if (err) {\n            toastr.error(\"login failed\");\n            return;\n          }\n          if (origin) {\n            origin = decodeURIComponent(origin);\n            return window.location = origin;\n          } else {\n            return window.location = \"/\";\n          }\n        });\n      };\n    })(this))), P.div('footer').C(P.p().C(P.a().href('#').C('I forgot my password')), P.a('text-center').href('#').C('Register a new membership')));\n  };\n\n  return Login;\n\n})(Block);\n\nwindow.onload = function() {\n  var login;\n  login = new Login();\n  return document.body.appendChild(login.build().elmt);\n};\n","var Page,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nPage = (function(superClass) {\n  extend(Page, superClass);\n\n  function Page() {\n    return Page.__super__.constructor.apply(this, arguments);\n  }\n\n  Page.prototype.build = function() {\n    return P.div().C(\"note\");\n  };\n\n  return Page;\n\n})(Widget);\n\nmodule.exports = new Page();\n","var Page,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nPage = (function(superClass) {\n  extend(Page, superClass);\n\n  function Page() {\n    return Page.__super__.constructor.apply(this, arguments);\n  }\n\n  Page.prototype.build = function() {\n    return P.div().C(\"todo\");\n  };\n\n  return Page;\n\n})(Widget);\n\nmodule.exports = new Page();\n","window.Box = {};\n\n_.extend(Box, {\n  env: 'prod',\n  dataUrl: 'https://api.rjft.net/api/v2/'\n});\n","var Page, nav,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nnav = require(\"./nav\");\n\nPage = (function(superClass) {\n  extend(Page, superClass);\n\n  function Page() {\n    this.update = bind(this.update, this);\n    this.build = bind(this.build, this);\n    this.attrs(\"currentPage\", \"page\");\n  }\n\n  Page.prototype.build = function() {\n    return P.div().id(\"frame\").C(P.div(\"main-header\").C(nav.build()), this.mainWrapper = P.div().id(\"main-wrapper\"));\n  };\n\n  Page.prototype.update = function() {\n    this.mainWrapper.reC(this._page.build());\n    return this._page.render();\n  };\n\n  return Page;\n\n})(Widget);\n\nmodule.exports = new Page();\n","var Page, items,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nitems = {\n  book: \"笔记本\",\n  note: \"笔记\",\n  todo: \"TODO\"\n};\n\nPage = (function(superClass) {\n  extend(Page, superClass);\n\n  function Page() {\n    this.build = bind(this.build, this);\n    this.attrs(\"page\", \"items\");\n  }\n\n  Page.prototype.build = function() {\n    var key, link, toggleButton, value;\n    return P.nav('navbar navbar-default').C(P.div('container-fluid').C(P.div('navbar-header').C(toggleButton = P.button('navbar-toggle collapsed').type('button').dataAttr('toggle', 'collapse').dataAttr('target', '#bs-example-navbar-collapse-1').attr('aria-expanded', 'false').C(P.span('sr-only').C('Toggle navigation'), P.span('icon-bar'), P.span('icon-bar'), P.span('icon-bar')), P.a('navbar-brand').href('#').C('社区管理')), this.collapse = P.div('collapse navbar-collapse').id('bs-example-navbar-collapse-1').C(P.ul('nav navbar-nav').C(this.items = (function() {\n      var results;\n      results = [];\n      for (key in items) {\n        value = items[key];\n        link = \"#page?name=\" + key;\n        results.push(P.li(\"nav-item\").C(P.a().href(link).C(value).onclick(function() {})).onclick(function() {\n          $(\".nav-item\").removeClass(\"select\");\n          $(this).addClass(\"select\");\n          console.log(toggleButton.attr(\"aria-expanded\"));\n          if (toggleButton.attr(\"aria-expanded\") === \"true\") {\n            return toggleButton.click();\n          }\n        }));\n      }\n      return results;\n    })()), P.form('navbar-form navbar-left').role('search').C(P.div('form-group').C(this.input = P.input('form-control').type('text').placeholder('课程名称 讲师').onkeyup((function(_this) {\n      return function(e) {\n        if (e.which === 13) {\n          if (!_this.input.value()) {\n            return;\n          }\n          window.location = \"#profile?id=\" + (_this.input.value());\n          return window.location.reload();\n        }\n      };\n    })(this))), P.button('btn btn-default').type('submit').C('检索').onclick((function(_this) {\n      return function() {\n        if (!_this.input.value()) {\n          return;\n        }\n        return window.location = \"#profile?id=\" + (_this.input.value());\n      };\n    })(this))), P.ul('nav navbar-nav navbar-right').C(P.li().C(P.a().href('#').C('退出').onclick((function(_this) {\n      return function() {\n        return localStorage.removeItem(\"token\");\n      };\n    })(this)))))));\n  };\n\n  return Page;\n\n})(Widget);\n\nmodule.exports = new Page();\n","var frame;\n\nwindow.json = JSON;\n\nrequire('./quite');\n\nrequire('./box');\n\nrequire('./under');\n\nframe = require('./frame');\n\nwindow.onload = function() {\n  document.body.insertBefore(frame.build().elmt, document.body.childNodes[0]);\n  Router.frame(frame).index('todo');\n  return Router.hash(Hash.init()).change();\n};\n","var Hash, HashClass, defaultPartName, nameSpliter, paramSpliter, partSpliter, rewriteParam, valueSpliter,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\npartSpliter = \"|\";\n\nparamSpliter = \"&\";\n\nnameSpliter = \"?\";\n\nvalueSpliter = \"=\";\n\ndefaultPartName = \"page\";\n\nrewriteParam = function(hash, paramName, value) {\n  var params, partName, ref;\n  if (value === void 0) {\n    params = paramName;\n    if (_.isObject(params)) {\n      return params;\n    }\n    return {};\n  }\n  params = hash.params();\n  if (paramName.indexOf(\".\") > 0) {\n    ref = paramName.split(\".\"), partName = ref[0], paramName = ref[1];\n    params[partName][paramName] = value;\n  } else {\n    if (value instanceof Object) {\n      params[paramName] = value;\n    } else {\n      params[defaultPartName][paramName] = value;\n    }\n  }\n  return params;\n};\n\nHashClass = (function(superClass) {\n  extend(HashClass, superClass);\n\n  function HashClass() {\n    this.set = bind(this.set, this);\n    this.stringify = bind(this.stringify, this);\n    this.parse = bind(this.parse, this);\n    this.attrs(\"params\", \"hashStr\");\n  }\n\n  HashClass.prototype.parse = function() {\n    var i, key, len, name, param, params, partParam, partParams, ref, value;\n    if (!this._hashStr) {\n      if (!window.location.hash) {\n        return this;\n      }\n      this._hashStr = window.location.hash.slice(1);\n    }\n    partParams = this._hashStr.split(partSpliter);\n    partParams = _.compact(partParams);\n    this._params = {};\n    for (i = 0, len = partParams.length; i < len; i++) {\n      partParam = partParams[i];\n      ref = partParam.split(nameSpliter), name = ref[0], params = ref[1];\n      if (!params) {\n        continue;\n      }\n      params = params.split(paramSpliter);\n      params = (function() {\n        var j, len1, ref1, results;\n        results = [];\n        for (j = 0, len1 = params.length; j < len1; j++) {\n          param = params[j];\n          ref1 = param.split(valueSpliter), key = ref1[0], value = ref1[1];\n          if (!value) {\n            continue;\n          }\n          value = _.jsonParse(value);\n          results.push([key, value]);\n        }\n        return results;\n      })();\n      params = _.object(params);\n      this._params[name] = params;\n    }\n    return this;\n  };\n\n  HashClass.prototype.stringify = function() {\n    var key, name, param, paramStrs, partStrs, value;\n    this._hashStr = \"\";\n    if (!this._params) {\n      return;\n    }\n    partStrs = (function() {\n      var ref, results;\n      ref = this._params;\n      results = [];\n      for (name in ref) {\n        param = ref[name];\n        paramStrs = (function() {\n          var results1;\n          results1 = [];\n          for (key in param) {\n            value = param[key];\n            results1.push(\"\" + key + valueSpliter + value);\n          }\n          return results1;\n        })();\n        paramStrs = paramStrs.join(paramSpliter);\n        results.push(\"\" + name + nameSpliter + paramStrs);\n      }\n      return results;\n    }).call(this);\n    return this._hashStr = \"#\" + partStrs.join(partSpliter);\n  };\n\n  HashClass.prototype.set = function(paramName, value) {\n    if (paramName === void 0) {\n      return this.stringify();\n    }\n    return this.params(rewriteParam(this, paramName, value)).stringify();\n  };\n\n  return HashClass;\n\n})(Quite);\n\nHash = new HashClass();\n\nHash = _.extend(Hash, {\n  page: function(pageName) {\n    var param;\n    return new HashClass().params(param = {\n      page: {\n        name: pageName\n      }\n    });\n  },\n  init: function() {\n    return new HashClass().parse();\n  },\n  set: function(paramName, value) {\n    var hash, params;\n    hash = new HashClass().parse();\n    params = {};\n    if (paramName !== void 0) {\n      params = rewriteParam(hash, paramName, value);\n    }\n    return hash.params(params).stringify();\n  }\n});\n\nwindow.Hash = Hash;\n","require('./under');\n\nrequire('./quite');\n\nrequire('./piece');\n\nrequire('./widget');\n\nrequire(\"./hash\");\n\nrequire(\"./router\");\n","var constants;\n\nmodule.exports = constants = {\n  tags: function() {\n    return \"doctype, html, head, body, h1, h6, p, ul, ol, dl, a, table, strong, b, div, header, nav, article, footer, aside, section, img, map, area, form, input, !DOCTYPE, a, abbr, acronym, address, applet, area, article, aside, audio, b, base, basefont, bdi, bdo, big, blockquote, body, br, button, canvas, caption, center, cite, code, col, colgroup, command, datalist, dd, del, details, dfn, dir, div, dl, dt, em, embed, fieldset, figcaption, figure, font, footer, form, frame, frameset, h1, h2, h3, h4, h5, h6, head, header, hgroup, hr, html, i, iframe, img, input, ins, kbd, keygen, label, legend, li, link, map, mark, menu, meta, meter, nav, noframes, noscript, object, ol, optgroup, option, output, p, param, pre, progress, q, rp, rt, ruby, s, samp, script, section, select, small, source, span, strike, strong, style, sub, summary, sup, table, tbody, td, textarea, tfoot, th, thead, time, title, tr, track, tt, u, ul, var, video, wbr, abbr, object\".split(',');\n  },\n  attrs: function() {\n    return \"role, accept, accept-charset, accesskey, action, align, alt, async, autocomplete, autofocus, autoplay, bgcolor, border, buffered, challenge, charset, checked, cite, class, code, codebase, color, cols, colspan, content, contenteditable, contextmenu, controls, coords, data, datetime, default, defer, dir, dirname, disabled, download, draggable, dropzone, enctype, for, form, headers, height, hidden, high, href, hreflang, http-equiv, icon, id, ismap, itemprop, keytype, kind, label, lang, language, list, loop, low, manifest, max, maxlength, media, method, min, multiple, name, novalidate, open, optimum, pattern, ping, placeholder, poster, preload, pubdate, radiogroup, readonly, rel, required, reversed, rows, rowspan, sandbox, spellcheck, scope, scoped, seamless, selected, shape, size, sizes, span, src, srcdoc, srclang, start, step, style, summary, tabindex, target, title, type, usemap, value, width, wrap\".split(',');\n  },\n  events: function() {\n    return \"onabort ,onblur ,onchange ,onclick ,onclose ,oncontextmenu ,ondblclick ,onerror ,onfocus ,oninput ,onkeydown ,onkeypress ,onkeyup ,onload ,onmousedown ,onmousemove ,onmouseout ,onmouseover ,onmouseup ,onscroll ,onselect ,onsubmit\".split(',');\n  },\n  props: function() {\n    return \"classList ,className ,clientHeight ,clientLeft ,clientTop ,clientWidth ,id ,innerHTML ,outerHTML ,scrollHeight ,scrollLeft ,scrollTop ,scrollWidth ,tagName\".split(',');\n  },\n  nodeProps: function() {\n    return \"attributes ,baseURI ,baseURIObject ,childNodes ,firstChild ,lastChild ,localName ,namespaceURI ,nextSibling ,nodeName ,nodePrincipal ,nodeType ,nodeValue ,ownerDocument ,parentElement ,parentNode ,prefix ,previousSibling ,textContent\".split(',');\n  },\n  nodeMethods: function() {\n    return \"appendChild, cloneNode, compareDocumentPosition, contains, getUserData, hasAttributes, hasChildNodes, insertBefore, isDefaultNamespace, isEqualNode, isSameNode, isSupported, lookupNamespaceURI, lookupPrefix, normalize, removeChild, replaceChild, setUserData\".split(',');\n  },\n  elmtMethods: function() {\n    return \"getAttributeNS, getAttributeNode, getAttributeNodeNS, getBoundingClientRect, undefined, getClientRects, undefined, getElementsByClassName, getElementsByTagName, getElementsByTagNameNS, hasAttribute, hasAttributeNS, insertAdjacentHTML, matches, querySelector, querySelectorAll, removeAttribute, removeAttributeNS, removeAttributeNode, requestFullscreen, requestPointerLock, scrollIntoView, setAttribute, setAttributeNS, setAttributeNode, setAttributeNodeNS, setCapture, supports, getAttribute\".split(',');\n  },\n  htmlElmtMethods: function() {\n    return ['blur', 'click', 'focus'];\n  }\n};\n","var Piece, PieceSet, appendHTML, attrs, constants, elmtMethods, events, fn, func, htmlElmtMethods, i, len, methods, nodeMethods, nodeProps, props, ref, tags,\n  slice = [].slice;\n\nconstants = require('./constants');\n\nattrs = constants.attrs();\n\nevents = constants.events();\n\nprops = constants.props();\n\nnodeProps = constants.nodeProps();\n\nprops = props.concat(nodeProps);\n\ntags = constants.tags();\n\nnodeMethods = constants.nodeMethods();\n\nelmtMethods = constants.elmtMethods();\n\nhtmlElmtMethods = constants.htmlElmtMethods();\n\nmethods = nodeMethods.concat(elmtMethods);\n\nmethods = methods.concat(htmlElmtMethods);\n\nPiece = (function() {\n  function Piece(elmt) {\n    if (typeof elmt === 'string') {\n      this.elmt = document.createElement(elmt);\n    } else if (elmt instanceof Element) {\n      this.elmt = elmt;\n    }\n  }\n\n  Piece.prototype.insertNext = function(pieces) {\n    var i, len, piece, results;\n    if (!(pieces instanceof Array)) {\n      pieces = [pieces];\n    }\n    results = [];\n    for (i = 0, len = pieces.length; i < len; i++) {\n      piece = pieces[i];\n      results.push(this.elmt.parentNode.insertBefore(piece.elmt, this.elmt.nextSibling));\n    }\n    return results;\n  };\n\n  Piece.prototype.insertAt = function(pieces, position) {\n    var i, index, len, piece;\n    if (!(pieces instanceof Array)) {\n      pieces = [pieces];\n    }\n    for (index = i = 0, len = pieces.length; i < len; index = ++i) {\n      piece = pieces[index];\n      this.elmt.insertBefore(piece.elmt, this.elmt.children[position + index]);\n    }\n    return this;\n  };\n\n  Piece.prototype.h = function(attr, elmtAttr) {\n    attr || (attr = 'D');\n    this.elmt.setAttribute('data-holderid', attr);\n    if (elmtAttr !== void 0) {\n      this.elmt.setAttribute('data-attr', elmtAttr);\n    }\n    this.addClass('pieceHolder');\n    return this;\n  };\n\n  Piece.prototype.select = function(selector) {\n    var elmt, elmts, name, type;\n    type = selector[0];\n    name = selector.slice(1);\n    elmts = {};\n    if (type === '#') {\n      elmt = this.elmt.getElementById(name);\n      return new Piece(elmt);\n    } else if (type === '.') {\n      elmts = this.elmt.getElementsByClassName(name);\n      return new PieceSet(elmts);\n    } else {\n      elmts = this.elmt.getElementsByTagName(selector);\n      return new PieceSet(elmts);\n    }\n  };\n\n  Piece.prototype.render = function(data, attrView) {\n    var attr, elmt, elmts, holders, i, j, len, len1, piece, ref, results;\n    holders = this.select('.pieceHolder');\n    elmts = [];\n    for (i = 0, len = holders.length; i < len; i++) {\n      elmt = holders[i];\n      elmts.push(elmt);\n    }\n    if (this[\"class\"]().indexOf('pieceHolder') >= 0) {\n      holders.elmts.push(this);\n    }\n    results = [];\n    for (j = 0, len1 = holders.length; j < len1; j++) {\n      piece = holders[j];\n      attr = piece.attr('data-holderid');\n      attrView = this[attr + \"View\"];\n      if (typeof attrView === \"function\" ? attrView(this.get(attr)) : void 0) {\n        results.push(elmt.innerHTML = (ref = attrView(this.get(attr)).elmt) != null ? ref.outerHTML : void 0);\n      } else {\n        results.push(elmt.innerText = this.get(attr));\n      }\n    }\n    return results;\n  };\n\n  Piece.prototype.attr = function(name, value) {\n    if (value === void 0) {\n      return this.elmt.getAttribute(name);\n    } else {\n      this.elmt.setAttribute(name, value);\n      return this;\n    }\n  };\n\n  Piece.prototype.dataAttr = function(name, value) {\n    return this.attr(\"data-\" + name, value);\n  };\n\n  Piece.prototype.replace = function(piece) {\n    var newElmt;\n    newElmt = this.elmt.parentNode.insertBefore(piece.elmt, this.elmt);\n    this.remove();\n    this.elmt = newElmt;\n    return this;\n  };\n\n  Piece.prototype.hide = function() {\n    this._hide = true;\n    this.style('display:none');\n    return this;\n  };\n\n  Piece.prototype.show = function() {\n    if (this._hide) {\n      this._hide = false;\n    }\n    this.style('display');\n    return this;\n  };\n\n  Piece.prototype.addClass = function(name) {\n    this[\"class\"](name + \" \" + (this.className()));\n    return this;\n  };\n\n  Piece.prototype.removeClass = function(name) {\n    this[\"class\"](this[\"class\"]().replace(\"\" + name, ''));\n    return this;\n  };\n\n  Piece.prototype.toggleClass = function(name) {\n    if (this[\"class\"]().indexOf(name) >= 0) {\n      return this.removeClass(name);\n    } else {\n      return this.addClass(name);\n    }\n  };\n\n  Piece.prototype.remove = function() {\n    return this.elmt.parentElement.removeChild(this.elmt);\n  };\n\n  Piece.prototype.destroy = function() {\n    return this.remove();\n  };\n\n  Piece.prototype.insert = function(elmt, position) {\n    var children, target;\n    if (elmt instanceof Piece) {\n      elmt = elmt.elmt;\n    }\n    children = this.childNodes();\n    if (position < 0) {\n      position = 0;\n    }\n    if (position >= children.length) {\n      console.log(elmt);\n      return this.appendChild(elmt);\n    } else {\n      target = children[position];\n      return this.insertBefore(elmt, target);\n    }\n  };\n\n  Piece.prototype.move = function(current, targetPosition) {\n    if (typeof current === 'number') {\n      current = this.children(current);\n    }\n    return this.insert(current, targetPosition);\n  };\n\n  Piece.prototype.del = function(position) {};\n\n  Piece.prototype.C = function() {\n    var children;\n    children = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    if (!children) {\n      return this.elmt;\n    }\n    children.forEach((function(_this) {\n      return function(child) {\n        if (!child) {\n          return;\n        }\n        if (child instanceof Piece) {\n          return _this.elmt.appendChild(child.elmt);\n        } else if (child instanceof Function) {\n          return _this.C(child());\n        } else if (child instanceof Array) {\n          return _this.C.apply(_this, child);\n        } else if (child.piece) {\n          return _this.C(child.piece);\n        } else {\n          return appendHTML(_this.elmt, child.toString());\n        }\n      };\n    })(this));\n    return this;\n  };\n\n  Piece.prototype.reC = function() {\n    var children;\n    children = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    this.elmt.innerHTML = '';\n    return this.C.apply(this, children);\n  };\n\n  return Piece;\n\n})();\n\nappendHTML = function(parent, html) {\n  var child, div, i, len, ref, results;\n  div = document.createElement('div');\n  div.innerHTML = html;\n  ref = div.childNodes;\n  results = [];\n  for (i = 0, len = ref.length; i < len; i++) {\n    child = ref[i];\n    results.push(parent.appendChild(child));\n  }\n  return results;\n};\n\nattrs.forEach(function(attr) {\n  attr = attr.trim();\n  return Piece.prototype[attr] = function(value) {\n    if (value !== void 0) {\n      if (value instanceof Piece) {\n        value = value.elmt;\n      }\n      if (value instanceof Function) {\n        value = value();\n      }\n      this.elmt.setAttribute(attr, value);\n      return this;\n    } else {\n      return this.elmt.getAttribute(attr);\n    }\n  };\n});\n\nevents.forEach(function(event) {\n  event = event.trim();\n  return Piece.prototype[event] = function(func) {\n    if (func) {\n      this.elmt[event] = func;\n    }\n    return this;\n  };\n});\n\nprops.forEach(function(prop) {\n  prop = prop.trim();\n  return Piece.prototype[prop] = function(value) {\n    if (value !== void 0) {\n      if (value instanceof Function) {\n        value = value();\n      }\n      this.elmt[prop] = value;\n      return this;\n    } else {\n      return this.elmt[prop];\n    }\n  };\n});\n\nmethods.forEach(function(method) {\n  method = method.trim();\n  return Piece.prototype[method] = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    (ref = this.elmt)[method].apply(ref, args);\n    return this;\n  };\n});\n\nPiece.prototype.value = function(value) {\n  if (value !== void 0) {\n    this.elmt['value'] = value;\n    return this;\n  } else {\n    return this.elmt['value'];\n  }\n};\n\nPieceSet = (function() {\n  function PieceSet(elmts1) {\n    var elmt, i, len, ref;\n    this.elmts = elmts1;\n    this.set = [];\n    ref = this.elmts;\n    for (i = 0, len = ref.length; i < len; i++) {\n      elmt = ref[i];\n      this.set.push(new Piece(elmt));\n    }\n  }\n\n  PieceSet.prototype.run = function() {\n    var args, funName, i, len, piece, ref, results;\n    funName = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    ref = this.set;\n    results = [];\n    for (i = 0, len = ref.length; i < len; i++) {\n      piece = ref[i];\n      results.push(piece[funName].apply(piece, args));\n    }\n    return results;\n  };\n\n  return PieceSet;\n\n})();\n\nref = Object.keys(Piece.prototype);\nfn = function(func) {\n  if (Piece.prototype[func] instanceof Function) {\n    return PieceSet.prototype[func] = function() {\n      var args;\n      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n      return this.run.apply(this, [func].concat(slice.call(args)));\n    };\n  }\n};\nfor (i = 0, len = ref.length; i < len; i++) {\n  func = ref[i];\n  fn(func);\n}\n\nwindow.P = function(selector, element) {\n  var elmt, elmts, name, type;\n  if (element == null) {\n    element = document;\n  }\n  if (selector instanceof Element) {\n    return new Piece(selector);\n  }\n  type = selector[0];\n  name = selector.slice(1);\n  elmts = {};\n  if (type === '#') {\n    elmt = element.getElementById(name);\n    return new Piece(elmt);\n  } else if (type === '.') {\n    elmts = element.getElementsByClassName(name);\n    return new PieceSet(elmts);\n  } else {\n    elmts = element.getElementsByTagName(selector);\n    return new PieceSet(elmts);\n  }\n};\n\ntags.forEach(function(tag) {\n  tag = tag.trim();\n  return P[tag] = function(className) {\n    if (className) {\n      return new Piece(tag)[\"class\"](className);\n    } else {\n      return new Piece(tag);\n    }\n  };\n});\n\nP.inputBox = function(className) {\n  if (className) {\n    return P.input(className).type('text');\n  } else {\n    return P.input().type('text');\n  }\n};\n","var Quite,\n  slice = [].slice;\n\nwindow.Quite = Quite = (function() {\n  function Quite() {\n    this._attrs = [];\n  }\n\n  Quite.prototype.attrs = function() {\n    var attr, attrs, i, len, results;\n    attrs = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    this._attrs || (this._attrs = []);\n    results = [];\n    for (i = 0, len = attrs.length; i < len; i++) {\n      attr = attrs[i];\n      results.push((function(_this) {\n        return function(attr) {\n          if (attr instanceof Array) {\n            return _this.attrs.apply(_this, attr);\n          } else {\n            _this._attrs.push(attr);\n            return _this[attr] = function() {\n              var attrValue;\n              attrValue = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n              if (attrValue.length === 0) {\n                return this[\"_\" + attr];\n              } else if (attrValue.length === 1) {\n                this[\"_\" + attr] = attrValue[0];\n                return this;\n              } else {\n                this[\"_\" + attr] = attrValue;\n                return this;\n              }\n            };\n          }\n        };\n      })(this)(attr));\n    }\n    return results;\n  };\n\n  return Quite;\n\n})();\n","\n/*\n * 页面间的通讯主要靠url, 也即 window.onhashchange 事件\n *\n * 页面内的操作，要在url上保存状态。直接调用即可，没必要使用事件，url trigger。\n *\n *\n */\nvar RouterClass, frame,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nframe = require('../frame');\n\nRouterClass = (function(superClass) {\n  extend(RouterClass, superClass);\n\n  function RouterClass() {\n    this.change = bind(this.change, this);\n    this.changeParam = bind(this.changeParam, this);\n    this.changeParams = bind(this.changeParams, this);\n    this.changePage = bind(this.changePage, this);\n    this.attrs('currentHash', 'currentPage', 'hash', 'frame', 'index');\n  }\n\n  RouterClass.prototype.changePage = function() {\n    var e, error, page;\n    this.currentHash(this.hash());\n    page = null;\n    try {\n      page = require(\"pages/\" + (this._hash.params().page.name));\n    } catch (error) {\n      e = error;\n      page = require(\"pages/\" + this._index);\n    }\n    this.currentPage(page);\n    this.frame().page(page).update();\n    if (page.onload) {\n      page.onload();\n    }\n    return this.changeParams();\n  };\n\n  RouterClass.prototype.changeParams = function() {\n    return console.log(\"change params\");\n  };\n\n  RouterClass.prototype.changeParam = function() {};\n\n  RouterClass.prototype.change = function() {\n    console.log(\"hash\", this.currentHash(), this.hash());\n    if (!this.hash()) {\n      return;\n    }\n    if (!this.currentHash()) {\n      return this.changePage();\n    } else if (this.hash().params().page.name !== this.currentHash().params().page.name) {\n      return this.changePage();\n    } else {\n      return this.changeParams();\n    }\n  };\n\n  return RouterClass;\n\n})(Quite);\n\nwindow.Router = new RouterClass();\n\nwindow.onhashchange = (function(_this) {\n  return function() {\n    return Router.hash(Hash.init()).change();\n  };\n})(this);\n","var Url;\n\nmodule.exports = {\n  jsonParse: function(str) {\n    var e, error, parsedStr;\n    try {\n      parsedStr = JSON.parse(str);\n    } catch (error) {\n      e = error;\n      return str;\n    }\n    return parsedStr;\n  },\n  parse: function(str) {\n    var e, error;\n    try {\n      str = JSON.parse(str);\n    } catch (error) {\n      e = error;\n      return str;\n    }\n    return str;\n  },\n  isjson: function(str) {\n    var e, error;\n    try {\n      JSON.parse(str);\n    } catch (error) {\n      e = error;\n      return false;\n    }\n    return true;\n  },\n  merge: function(subject, guest) {\n    return subject;\n  },\n  stringObject: function(str) {\n    var i, item, items, key, len, obj, ref, value;\n    obj = {};\n    items = str.split('\\n');\n    for (i = 0, len = items.length; i < len; i++) {\n      item = items[i];\n      ref = item.split(/\\s+/), key = ref[0], value = ref[1];\n      obj[key] = value;\n    }\n    return obj;\n  },\n  stringArray: function(str) {\n    return str.split(/\\s+/);\n  },\n  clearSelection: function() {\n    var sel;\n    if (document.selection && document.selection.empty) {\n      return document.selection.empty();\n    } else if (window.getSelection) {\n      sel = window.getSelection();\n      return sel.removeAllRanges();\n    }\n  },\n  move: function(array, current, targetIndex) {\n    if (typeof current !== 'number') {\n      current = array.indexOf(current);\n    }\n    if (targetIndex < 0) {\n      targetIndex = 0;\n    }\n    return array.splice(targetIndex, 0, array.splice(current, 1)[0]);\n  },\n  insert: function(array, item, position) {\n    return array.splice(position, 0, item);\n  },\n  keycode: function(num) {\n    var keycode_dict;\n    keycode_dict = require('./constants').keycode_dict;\n    return keycode_dict[num];\n  },\n  url: function(url) {\n    return new Url(url);\n  },\n  ajax: function(url, params, cb) {\n    var done, fail;\n    params = \"params=\" + (json.stringify(params));\n    done = (function(_this) {\n      return function(data, status) {\n        if (data.error) {\n          console.log(data.error);\n        }\n        return cb(null, data.result);\n      };\n    })(this);\n    fail = function() {\n      return console.log('error');\n    };\n    return $.ajax({\n      method: 'post',\n      url: url,\n      data: params,\n      dataType: 'json',\n      success: done,\n      error: fail,\n      async: false\n    });\n  },\n  keydown: function(character) {\n    var evt, init;\n    evt = document.createEvent(\"KeyboardEvent\");\n    init = evt.initKeyEvent || evt.initKeyboardEvent;\n    init(\"keydown\", true, true, window, 0, 0, 0, 0, 0, character.charCodeAt(0));\n    return document.body.dispatchEvent(evt);\n  }\n};\n\nUrl = (function() {\n  function Url(url1) {\n    this.url = url1;\n  }\n\n  Url.prototype.get = function(attrName) {\n    return $.url(attrName, this.url);\n  };\n\n  return Url;\n\n})();\n","module.exports = {\n  keycode_dict: {\n    0: \"\\\\\",\n    8: \"backspace\",\n    9: \"tab\",\n    12: \"num\",\n    13: \"enter\",\n    16: \"shift\",\n    17: \"ctrl\",\n    18: \"alt\",\n    19: \"pause\",\n    20: \"caps\",\n    27: \"esc\",\n    32: \"space\",\n    33: \"pageup\",\n    34: \"pagedown\",\n    35: \"end\",\n    36: \"home\",\n    37: \"left\",\n    38: \"up\",\n    39: \"right\",\n    40: \"down\",\n    44: \"print\",\n    45: \"insert\",\n    46: \"delete\",\n    48: \"0\",\n    49: \"1\",\n    50: \"2\",\n    51: \"3\",\n    52: \"4\",\n    53: \"5\",\n    54: \"6\",\n    55: \"7\",\n    56: \"8\",\n    57: \"9\",\n    65: \"a\",\n    66: \"b\",\n    67: \"c\",\n    68: \"d\",\n    69: \"e\",\n    70: \"f\",\n    71: \"g\",\n    72: \"h\",\n    73: \"i\",\n    74: \"j\",\n    75: \"k\",\n    76: \"l\",\n    77: \"m\",\n    78: \"n\",\n    79: \"o\",\n    80: \"p\",\n    81: \"q\",\n    82: \"r\",\n    83: \"s\",\n    84: \"t\",\n    85: \"u\",\n    86: \"v\",\n    87: \"w\",\n    88: \"x\",\n    89: \"y\",\n    90: \"z\",\n    91: \"cmd\",\n    92: \"cmd\",\n    93: \"cmd\",\n    96: \"num_0\",\n    97: \"num_1\",\n    98: \"num_2\",\n    99: \"num_3\",\n    100: \"num_4\",\n    101: \"num_5\",\n    102: \"num_6\",\n    103: \"num_7\",\n    104: \"num_8\",\n    105: \"num_9\",\n    106: \"num_multiply\",\n    107: \"num_add\",\n    108: \"num_enter\",\n    109: \"num_subtract\",\n    110: \"num_decimal\",\n    111: \"num_divide\",\n    124: \"print\",\n    144: \"num\",\n    145: \"scroll\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    189: \"-\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"\\'\",\n    223: \"`\",\n    224: \"cmd\",\n    225: \"alt\",\n    57392: \"ctrl\",\n    63289: \"num\",\n    59: \";\"\n  }\n};\n","var common;\n\ncommon = require('./common');\n\n_.extend(_, common);\n","var TestCommon, common;\n\ncommon = require('../common');\n\nmodule.exports = TestCommon = (function() {\n  function TestCommon() {}\n\n  TestCommon.prototype.move = function() {\n    var array;\n    array = ['zero', 'one', 'two', 'three'];\n    common.move(array, 'one', 2);\n    return console.log(array);\n  };\n\n  return TestCommon;\n\n})();\n","var i, len, method, methods;\n\nmethods = [\"Element.getAttributeNS\", \"Element.getAttributeNode\", \"Element.getAttributeNodeNS\", \"Element.getBoundingClientRect\", \"\", \"Element.getClientRects\", \"\", \"Element.getElementsByClassName\", \"Element.getElementsByTagName\", \"Element.getElementsByTagNameNS\", \"Element.hasAttribute\", \"Element.hasAttributeNS\", \"Element.insertAdjacentHTML\", \"Element.matches\", \"Element.querySelector\", \"Element.querySelectorAll\", \"Element.removeAttribute\", \"Element.removeAttributeNS\", \"Element.removeAttributeNode\", \"Element.requestFullscreen\", \"Element.requestPointerLock\", \"Element.scrollIntoView\", \"Element.setAttribute\", \"Element.setAttributeNS\", \"Element.setAttributeNode\", \"Element.setAttributeNodeNS\", \"Element.setCapture\", \"Element.supports\", \"element.getAttribute\", \"\"];\n\nfor (i = 0, len = methods.length; i < len; i++) {\n  method = methods[i];\n  console.log(method.split('.')[1] + ',');\n}\n","var Widget,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty,\n  slice = [].slice;\n\nwindow.Widget = Widget = (function(superClass) {\n  extend(Widget, superClass);\n\n  function Widget() {\n    Widget.__super__.constructor.apply(this, arguments);\n    this.attrs('piece');\n    this._members = [];\n  }\n\n  Widget.prototype.D = {};\n\n  Widget.prototype.show = function() {\n    return this._piece || this.build();\n  };\n\n  Widget.prototype.render = function(D) {\n    var i, len, member, ref, results;\n    this.D = D;\n    if (this.D === void 0) {\n      this.D = {};\n    }\n    ref = this._members;\n    results = [];\n    for (i = 0, len = ref.length; i < len; i++) {\n      member = ref[i];\n      results.push(member.render(this.D));\n    }\n    return results;\n  };\n\n  Widget.prototype.remove = function() {\n    return this.piece.remove();\n  };\n\n  Widget.prototype.C = function() {\n    var args, ref;\n    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    (ref = this.piece).C.apply(ref, args);\n    return this;\n  };\n\n  Widget.prototype.build = function() {\n    return P.div('block');\n  };\n\n  Widget.prototype.update = function(data) {\n    var attr, attrName, attrView, element, elmt, elmts, holders, i, j, len, len1, ref, ref1;\n    if (data !== void 0) {\n      this.D = data;\n    }\n    element = this._piece.elmt;\n    holders = element.getElementsByClassName('pieceHolder');\n    elmts = [];\n    for (i = 0, len = holders.length; i < len; i++) {\n      elmt = holders[i];\n      elmts.push(elmt);\n    }\n    if (((ref = element.className) != null ? ref.indexOf('pieceHolder') : void 0) !== -1) {\n      elmts.push(element);\n    }\n    for (j = 0, len1 = elmts.length; j < len1; j++) {\n      elmt = elmts[j];\n      attr = elmt.getAttribute('data-holderid');\n      if (attr === 'D') {\n        this.render();\n      }\n      attrView = this[attr + \"View\"];\n      if (typeof attrView === \"function\" ? attrView(this.D[attr]) : void 0) {\n        elmt.innerHTML = (ref1 = attrView(this.D[attr]).elmt) != null ? ref1.outerHTML : void 0;\n      } else {\n        if (attrName = elmt.getAttribute('data-attr')) {\n          elmt.setAttribute(attrName, this.D[attr]);\n        } else {\n          elmt.innerText = this.D[attr];\n        }\n      }\n    }\n    return this;\n  };\n\n  return Widget;\n\n})(Quite);\n","var fail;\n\nfail = function(jqXHR, textStatus) {\n  return console.log('error', jqXHR, textStatus);\n};\n\n_.extend(_, {\n  formatDate: function(date) {\n    return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + (date.getDate()) + ' ' + date.getHours() + '点';\n  },\n  getToken: function() {\n    var href, token;\n    token = localStorage.getItem('token');\n    if (token) {\n      return token;\n    } else {\n      console.log('not token');\n      href = encodeURIComponent(window.location.href);\n      console.log({\n        href: href\n      });\n      window.location = \"login.html?path=\" + href;\n    }\n  },\n  appGet: (function(_this) {\n    return function(path, params, cb) {\n      var done;\n      fail = function(jqXHR, textStatus) {\n        console.log('error', jqXHR, textStatus);\n        return cb(\"err\");\n      };\n      done = function(data, status) {\n        if (data.error) {\n          return console.log('数据请求错误', data.error);\n        } else {\n          return cb(null, data);\n        }\n      };\n      return $.ajax({\n        method: 'get',\n        url: \"\" + Box.appUrl + path,\n        data: params,\n        success: done,\n        headers: {\n          'Authorization': \"Bearer \" + _.getToken()\n        },\n        error: fail\n      });\n    };\n  })(this),\n  get: (function(_this) {\n    return function(path, params, cb) {\n      var done;\n      done = function(data, status) {\n        if (data != null ? data.error : void 0) {\n          return console.log('数据请求错误', data.error);\n        } else {\n          return cb(null, data);\n        }\n      };\n      return $.ajax({\n        method: 'get',\n        url: \"\" + Box.dataUrl + path,\n        data: params,\n        success: done,\n        headers: {\n          'Authorization': \"Bearer \" + _.getToken()\n        },\n        error: fail\n      });\n    };\n  })(this),\n  \"delete\": (function(_this) {\n    return function(path, params, cb) {\n      var done;\n      done = function(data, status) {\n        if (data != null ? data.error : void 0) {\n          console.log('数据请求错误', data.error);\n          return cb(new Error(\"an error\"), {});\n        } else {\n          return cb(null, data);\n        }\n      };\n      return $.ajax({\n        method: 'delete',\n        url: \"\" + Box.appUrl + path,\n        data: params,\n        success: done,\n        headers: {\n          'Authorization': \"Bearer \" + _.getToken()\n        },\n        error: done\n      });\n    };\n  })(this),\n  post: (function(_this) {\n    return function(path, params, cb) {\n      var done, localFail, url;\n      localFail = function(jqXHR, textStatus) {\n        console.log('error', jqXHR, textStatus);\n        return cb(null);\n      };\n      done = function(data, status) {\n        if (data.error) {\n          return console.log('数据请求错误', data.error);\n        } else {\n          return cb(null, data);\n        }\n      };\n      url = path;\n      if (path.indexOf('.') < 0) {\n        url = \"\" + Box.dataUrl + path;\n      }\n      return $.ajax({\n        method: 'post',\n        url: url,\n        data: params,\n        success: done,\n        headers: {\n          'Authorization': \"Bearer \" + _.getToken()\n        },\n        error: localFail\n      });\n    };\n  })(this),\n  mallGet: (function(_this) {\n    return function(path, params, cb) {\n      var done;\n      done = function(data, status) {\n        if (data != null ? data.error : void 0) {\n          return console.log('数据请求错误', data.error);\n        } else {\n          return cb(null, data);\n        }\n      };\n      return $.ajax({\n        method: 'get',\n        url: \"\" + Box.mallUrl + path,\n        data: params,\n        success: done,\n        headers: {\n          'Authorization': \"Bearer \" + _.getToken()\n        },\n        error: fail\n      });\n    };\n  })(this),\n  mallPost: (function(_this) {\n    return function(path, params, cb) {\n      var done, localFail, url;\n      localFail = function(jqXHR, textStatus) {\n        console.log('error', jqXHR, textStatus);\n        return cb(null);\n      };\n      done = function(data, status) {\n        if (data.error) {\n          return console.log('数据请求错误', data.error);\n        } else {\n          return cb(null, data);\n        }\n      };\n      url = \"\" + Box.mallUrl + path;\n      return $.ajax({\n        method: 'post',\n        url: url,\n        data: params,\n        success: done,\n        headers: {\n          'Authorization': \"Bearer \" + _.getToken()\n        },\n        error: localFail\n      });\n    };\n  })(this),\n  put: (function(_this) {\n    return function(path, params, cb) {\n      var done;\n      params = json.stringify(params);\n      done = function(data, status) {\n        if (data != null ? data.error : void 0) {\n          return console.log('数据请求错误', data.error);\n        } else {\n          return cb(null, data);\n        }\n      };\n      console.log('box url', Box, Box.dataUrl);\n      return $.ajax({\n        method: 'put',\n        contentType: 'application/json; charset=utf-8',\n        url: \"\" + Box.dataUrl + path,\n        data: params,\n        dataType: 'json',\n        success: done,\n        headers: {\n          'Authorization': \"Bearer \" + _.getToken()\n        },\n        error: fail\n      });\n    };\n  })(this),\n  appPost: (function(_this) {\n    return function(path, params, cb) {\n      var done;\n      done = function(data, status) {\n        if (data.error) {\n          console.log('数据请求错误', data.error);\n          return cb(new Error(\"an error\"), {});\n        } else {\n          return cb(null, data);\n        }\n      };\n      console.log('box url', Box, Box.dataUrl);\n      return $.ajax({\n        method: 'post',\n        url: \"\" + Box.appUrl + path,\n        data: params,\n        success: done,\n        headers: {\n          'Authorization': \"Bearer \" + _.getToken()\n        },\n        error: done\n      });\n    };\n  })(this),\n  data: (function(_this) {\n    return function(path, params, cb) {\n      var done, url;\n      params = json.stringify(params);\n      done = function(data, status) {\n        data = json.parse(data);\n        if (data.error) {\n          return console.log('数据请求错误', data.error);\n        } else {\n          return cb(null, data.result);\n        }\n      };\n      url = path;\n      if (path.indexOf('.') < 0) {\n        url = \"\" + Box.dataUrl + path;\n      }\n      return $.ajax({\n        method: 'post',\n        url: url,\n        data: params,\n        success: done,\n        error: fail\n      });\n    };\n  })(this),\n  loginPost: (function(_this) {\n    return function(url, params, cb) {\n      var done, loginFail;\n      loginFail = function(jqXHR, textStatus) {\n        console.log('error', jqXHR, textStatus);\n        return cb(jqXHR);\n      };\n      done = function(data, status) {\n        if (data.error) {\n          return console.log('数据请求错误', data.error);\n        } else {\n          return cb(null, data);\n        }\n      };\n      return $.ajax({\n        method: 'post',\n        url: url,\n        data: params,\n        success: done,\n        error: loginFail\n      });\n    };\n  })(this),\n  login: (function(_this) {\n    return function(username, password, cb) {\n      var params;\n      params = {\n        username: username,\n        password: password,\n        deviceID: \"1234212342\",\n        deviceType: \"ios\",\n        clientVersion: \"1.1.2\"\n      };\n      return _.loginPost(Box.authUrl, params, function(err, out) {\n        if (err) {\n          return cb(err);\n        }\n        if (out && out.token) {\n          localStorage.setItem('token', out.token);\n          return cb(null);\n        } else {\n          return cb(out.body);\n        }\n      });\n    };\n  })(this),\n  updateActivity: (function(_this) {\n    return function(activity, param, cb) {\n      var path;\n      if (param.is_reject === true) {\n        param.weight = -1000;\n      } else if (param.is_reject === false) {\n        param.weight = 0;\n      }\n      delete param.is_reject;\n      path = \"activities/\" + activity.id;\n      return _.put(path, param, cb);\n    };\n  })(this),\n  updateRoster: (function(_this) {\n    return function(userId, userType, isTop, expireTime, cb) {\n      if (isTop == null) {\n        isTop = false;\n      }\n      return _.mallPost(\"userPool/edit.json\", {\n        userId: userId,\n        userType: userType,\n        isTop: isTop,\n        expireTime: expireTime\n      }, cb);\n    };\n  })(this),\n  getPopUsers: (function(_this) {\n    return function(params, cb) {\n      console.log({\n        params: params\n      });\n      if ([\"stranger\", \"global\"].indexOf(params.userType) >= 0) {\n        params = {\n          type: params.userType,\n          page: (params.offset / params.limit) + 1,\n          pageSize: params.limit\n        };\n        return _.mallGet(\"roster/list.json\", params, function(err, out) {\n          console.log({\n            out: out\n          });\n          return cb(null, out.object.list);\n        });\n      } else {\n        return _.mallGet(\"userPool/queryList.json\", params, function(err, out) {\n          return cb(null, out.list);\n        });\n      }\n    };\n  })(this),\n  getRosters: (function(_this) {\n    return function(userType, isTop, cb) {\n      var limit, offset, params;\n      offset = 0;\n      limit = 100;\n      params = {\n        userType: userType,\n        isTop: isTop,\n        offset: offset,\n        limit: limit\n      };\n      return _.mallGet(\"userPool/queryList.json\", params, function(err, out) {\n        return cb(null, out.list);\n      });\n    };\n  })(this),\n  defaultImg: (function(_this) {\n    return function(profile) {\n      if (!profile) {\n        return;\n      }\n      if (!profile.avatar_url || profile.avatar_url.indexOf(\"null\") > 0) {\n        return profile.avatar_url = \"http://source.rjfittime.com/1ffda870265211e6a7f7bbfa18ac56c6\";\n      }\n    };\n  })(this),\n  populateProfiles: (function(_this) {\n    return function(ids, cb) {\n      var params;\n      console.log(\"populateProfiles\", ids);\n      params = {\n        id: ids\n      };\n      return _.appGet(\"v3/list-user\", params, function(err, users) {\n        return _.appGet(\"statistics/user/batch\", params, function(err, statistics) {\n          var img, imgs, index, profile, profiles, statistic, user;\n          console.log({\n            statistics: statistics\n          });\n          profiles = (function() {\n            var i, len, results;\n            results = [];\n            for (index = i = 0, len = users.length; i < len; index = ++i) {\n              user = users[index];\n              profile = user.user;\n              imgs = user.activities;\n              profile.imgs = [];\n              if (imgs != null ? imgs.length : void 0) {\n                imgs = (function() {\n                  var j, len1, results1;\n                  results1 = [];\n                  for (j = 0, len1 = imgs.length; j < len1; j++) {\n                    img = imgs[j];\n                    img.image = [img.image];\n                    results1.push(img);\n                  }\n                  return results1;\n                })();\n                imgs = _.sortBy(imgs, (function(_this) {\n                  return function(img) {\n                    return 1 / new Date(img.create_time).valueOf();\n                  };\n                })(this));\n                profile.imgs = imgs;\n              }\n              statistic = statistics[index];\n              statistic.registDay = dateFns.differenceInCalendarDays(new Date(), new Date(profile.create_time), new Date());\n              if (profile.imgs.length > 0) {\n                statistic.lastPhotoTime = dateFns.differenceInCalendarDays(new Date(), new Date(profile.imgs[0].create_time));\n              }\n              profile.statistic = statistic;\n              results.push(profile);\n            }\n            return results;\n          }).call(_this);\n          console.log({\n            profiles: profiles\n          });\n          return cb(null, profiles);\n        });\n      });\n    };\n  })(this)\n});\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */"]}